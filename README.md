# üìù Notes API

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∑–∞–º–µ—Ç–∫–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

[![NestJS](https://img.shields.io/badge/NestJS-10.0-red.svg)](https://nestjs.com/)
[![Prisma](https://img.shields.io/badge/Prisma-ORM-blue.svg)](https://www.prisma.io/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-12+-blue.svg)](https://www.postgresql.org/)
[![Socket.IO](https://img.shields.io/badge/Socket.IO-Real--time-green.svg)](https://socket.io/)

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîê **SMS –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- üìù **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∞–º–∏** - –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
- üè∑Ô∏è **–¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∑–∞–º–µ—Ç–æ–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- üí¨ **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ —Ä–µ–∞–∫—Ü–∏–∏** - –û–±—Å—É–∂–¥–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ —Å —ç–º–æ–¥–∑–∏-—Ä–µ–∞–∫—Ü–∏—è–º–∏
- üë• **–°–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å WebSocket
- üìÖ **–î–µ–¥–ª–∞–π–Ω—ã** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ä–æ–∫–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –∑–∞–º–µ—Ç–æ–∫
- üîó **–ü—É–±–ª–∏—á–Ω—ã–µ —Å—Å—ã–ª–∫–∏** - –î–µ–ª–∏—Ç–µ—Å—å –∑–∞–º–µ—Ç–∫–∞–º–∏ –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- üì± **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** - –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- PostgreSQL 12+
- Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd notes-api

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ó–∞–ø—É—Å–∫ PostgreSQL —á–µ—Ä–µ–∑ Docker
docker-compose up -d

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
npm run prisma:migrate

# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
npm run prisma:seed
```

### –ó–∞–ø—É—Å–∫

```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run start:dev

# –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º
npm run start:prod
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:3000

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [üìä ER –î–∏–∞–≥—Ä–∞–º–º–∞](./docs/ER_DIAGRAM.md) - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [üéØ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ](./docs/FRONTEND_TECHNICAL_SPECIFICATION.md) - Use cases –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- [üîå WebSocket API](./docs/WEBSOCKET_API.md) - Real-time —Ñ—É–Ω–∫—Ü–∏–∏
- [üìã –†–µ–∑—é–º–µ –ø—Ä–æ–µ–∫—Ç–∞](./docs/PROJECT_SUMMARY.md) - –û–±–∑–æ—Ä –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- [üîó Swagger UI](http://localhost:3000/api) - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

## üõ†Ô∏è API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

```http
POST /auth/send-sms     # –û—Ç–ø—Ä–∞–≤–∫–∞ SMS –∫–æ–¥–∞
POST /auth/login        # –í—Ö–æ–¥ –ø–æ SMS –∫–æ–¥—É
POST /auth/refresh      # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
```

### –ó–∞–º–µ—Ç–∫–∏

```http
GET    /notes                    # –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫
GET    /notes/archived          # –ê—Ä—Ö–∏–≤–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏
POST   /notes                   # –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
GET    /notes/:id               # –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
PATCH  /notes/:id               # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
DELETE /notes/:id               # –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
POST   /notes/:id/pin           # –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ
POST   /notes/:id/archive       # –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
POST   /notes/:id/deadline      # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ–¥–ª–∞–π–Ω–∞
POST   /notes/:id/share         # –ü—É–±–ª–∏—á–Ω–∞—è —Å—Å—ã–ª–∫–∞
GET    /notes/public/:token     # –ü—É–±–ª–∏—á–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞
```

### –¢–µ–≥–∏

```http
GET    /tags           # –°–ø–∏—Å–æ–∫ —Ç–µ–≥–æ–≤
POST   /tags           # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞
PATCH  /tags/:id       # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞
DELETE /tags/:id       # –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–≥–∞
```

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

```http
GET    /notes/:noteId/comments           # –°–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
POST   /notes/:noteId/comments           # –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
PATCH  /notes/:noteId/comments/:id       # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
DELETE /notes/:noteId/comments/:id       # –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
```

## üîå WebSocket Events

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```javascript
const socket = io("http://localhost:3000", {
  query: { token: "your-jwt-token" },
});
```

### –°–æ–±—ã—Ç–∏—è

```javascript
// –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∑–∞–º–µ—Ç–∫–µ
socket.emit("join", { noteId: 123 });

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞
socket.emit("caret", {
  noteId: 123,
  caret: { start: 10, end: 15 },
});

// –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
socket.emit("edit", {
  noteId: 123,
  content: "–Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç",
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
socket.on("users", (users) => {
  console.log("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ –∫–æ–º–Ω–∞—Ç–µ:", users);
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ—Ç –¥—Ä—É–≥–∏—Ö
socket.on("edit", ({ userId, content }) => {
  console.log("–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:", userId, content);
});
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ auth/           # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ notes/          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∞–º–∏
‚îú‚îÄ‚îÄ tags/           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞–º–∏
‚îú‚îÄ‚îÄ comments/       # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
‚îú‚îÄ‚îÄ reactions/      # –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
‚îú‚îÄ‚îÄ prisma/         # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ main.ts         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- JWT —Ç–æ–∫–µ–Ω—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–º–µ—Ç–∫–∞–º
- –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π —á–µ—Ä–µ–∑ Prisma
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è WebSocket

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- **PostgreSQL** - –û—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Prisma ORM** - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
- **–ú–∏–≥—Ä–∞—Ü–∏–∏** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º–æ–π
- **–°–≤—è–∑–∏** - –ú–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º –¥–ª—è —Ç–µ–≥–æ–≤ –∏ –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–æ–≤

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Unit —Ç–µ—Å—Ç—ã
npm run test

# E2E —Ç–µ—Å—Ç—ã
npm run test:e2e

# –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
npm run test:cov
```

## üê≥ Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t notes-api .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 3000:3000 notes-api

# Docker Compose (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö + –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
docker-compose up -d
```

## üì¶ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL="postgresql://user:password@localhost:5432/notes_db"

# JWT
JWT_SECRET="your-super-secret-key"
JWT_EXPIRES_IN="7d"

# SMS API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
SMS_API_KEY="your-sms-api-key"
SMS_API_URL="https://api.sms-provider.com"

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
PORT=3000
NODE_ENV=development
```

## ü§ù –°–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/amazing-feature`)
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üìß Email: support@notes-api.com
- üêõ Issues: [GitHub Issues](https://github.com/your-username/notes-api/issues)
- üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [docs/](./docs/)

---

‚≠ê –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥–æ—á–∫—É!
